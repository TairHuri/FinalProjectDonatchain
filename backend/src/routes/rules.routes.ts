import { Router, Request, Response } from "express";

const router = Router();

let rulesContent = [
  { title: "כללי", text: "מטרת המערכת היא להעניק פלטפורמה חדשנית לגיוס תרומות תוך שמירה על שקיפות, אבטחת מידע ואמינות מלאה. השימוש במערכת מהווה הסכמה מלאה לכל תנאי התקנון" },
  { title: "אחריות המשתמש", text: "המשתמש מתחייב להזין מידע מדויק ואמין בלבד, ולהימנע מכל שימוש לרעה במערכת. כל פעולה שתבוצע בשם המשתמש היא באחריותו הבלעדית" },
  { title: "פרטיות ושקיפות", text: "אנו מתחייבים לשמור על פרטיות המשתמשים בהתאם לחוק. טכנולוגיית הבלוקצ'יין מבטיחה תיעוד שקוף של תרומות מבלי לחשוף מידע אישי רגיש" },
  { title: "שימוש בטכנולוגיה", text: "המערכת משלבת בינה מלאכותית לניתוח טקסטים והצעת קמפיינים רלוונטיים. המלצות אלו אינן מחייבות והן נועדו לשפר את חוויית המשתמש בלבד" },
  { title: "קניין רוחני", text: "כל הקוד, התוכן והעיצוב במערכת הם קניינם הבלעדי של צוות הפיתוח. אין להעתיק, להפיץ או לעשות בהם שימוש ללא אישור כתוב מראש" },
  { title: "שינויים בתקנון", text: "הנהלת המערכת רשאית לעדכן את תנאי התקנון מעת לעת. המשך השימוש במערכת לאחר עדכון ייחשב כהסכמה מלאה לתנאים החדשים" },
];

// GET /api/rules
router.get("/", (req: Request, res: Response) => {
  res.json(rulesContent);
});

// PUT /api/rules → עדכון התקנון (רק למנהל)
router.put("/", (req: Request, res: Response) => {
  const updates = req.body; // צריך להיות מערך של סעיפים
  rulesContent = updates;
  res.json(rulesContent);
});

export default router;
